<!-- SPDX-FileCopyrightText: Â© Fossology contributors

     SPDX-License-Identifier: GPL-2.0-only
-->

To Whom it May Concern: 


What This Is and How to Work It
-------------------------------


This directory in the FOSSology source tree (`agents/nomos`) contains the source code for the `nomos` license analysis agent. The code originated as a standalone license-scanning tool but is now fully integrated with the FOSSology framework.

The build process for `nomos` has been migrated to the standard FOSSology CMake-based system.



## PostgreSQL Dependency
To build the `nomos` agent, PostgreSQL development headers must be installed. Ensure the PostgreSQL development package (`libpq-dev`) is available on your system:

- For Ubuntu/Debian:
  ```bash
  sudo apt-get install libpq-dev
  ```

To build and run `nomos`:

1. Navigate to the `nomos` directory:
   ```bash
   cd agents/nomos



Note About the Source Code and Impending Changes
------------------------------------------------

Because this code came from another tool similar to FOSSology, but with
different structure and conventions, the process of converting it into 
a full-fledged FOSSology agent is ongoing.

With that in mind, comments with "CDB" in them are bread crumbs I've 
left in places where I was unsure about a change I made or to note a potential
refinement (CDB == my initials).



To Do's
-------

- Change all trace calls at beginning of functions to use traceFunc()
  (defined in util.c)
 
- Either add a command-line option to set gl.ptswitch or remove all the
  PROC_TRACE_SWITCH #ifdefs

- Go back and edit CFLAGS options in Makefile to document and accurately
  represent what is still operable.

- Document all Makefile targets

- Remove all HP_INTERNAL and CUSTOMER_VERSION references.

- Check and remove all unused field of the gl global variable structure.

- Migrate to standard FOSSology makefile structure and system.
 


Changes
-------

[This is not at all complete. There have been a lot of changes.]

- Changed ls_t to licSpec_t.
- Changed lic_t to licText_t.


Questions
---------

- Where the hell is checkstrings script? Do we want it?
- COMMIT_HASH #ifdef stolen from other agent code. Where does this get
  #defined?
- Why does nomos set the LANG environment variable?
- Implications of removing custom magic file?
- May want to re-add function validateTools someplace?
- Do we want to keep the Log functionality, but just have the logfile
  be in another place? (Right now, the log stuff has been removed.)
- Do we really need the PROC_TRACE_SWITCH compile #define?


#defines Used
-------------

[Also incomplete.]

BRIEF_LIST
SHOW_LOCATION		Extra code to pinpoint license location. Should
			always be true.
PROC_TRACE
PROC_TRACE_SWITCH	Gives command option for tracing on/off
DEBUG
GLOBAL_DEBUG		Debug access to global variable structure
MEMORY_TRACING		Use Debug Malloc wrapper
STOPWATCH		Performance Measurement
TIMING			Performance Measurement (code has to be added to
places where you want to measure).


Changes made from my nomos_experimental version
-----------------------------------------------

Remove all code #ifdef'd by USE_MMAP 
